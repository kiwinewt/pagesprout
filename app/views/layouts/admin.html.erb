<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title><%= page_title %></title>
  <%= stylesheet_link_tag get_theme_stylesheet %>
  <script type="text/javascript">
    _editor_url  = "/javascripts/xinha/"
    _editor_lang = "en";
    _editor_skin = "silva";
  </script>
  <script type="text/javascript" src="/javascripts/xinha/XinhaCore.js"></script>
  <script type="text/javascript" src="/javascripts/xinha/config.js"></script>
  <%= javascript_include_tag :defaults %>
  <script type="text/javascript">
  var counter = 0;
  var limit = 3;
  function addInput(divName){
     if (counter == limit)  {
          alert("You have reached the limit of adding " + counter + " inputs");
     }
     else {
          counter++;
          var newdiv = document.createElement('div');
          newdiv.className = "element"
          newdiv.innerHTML = '<label for="'+divName+'_new_label_'+counter+'">Field '+counter+' Name</label>'
          newdiv.innerHTML += '<input type="text" name="'+divName+'_new_label_'+counter+'"><br />';
          newdiv.innerHTML += '<label for="'+divName+'_new_value_'+counter+'">Field '+counter+' Value</label>'
          newdiv.innerHTML += "<input type='text' name='"+divName+"_new_value_"+counter+"' />";
          document.getElementById(divName).appendChild(newdiv);
     }
  }
  </script>
</head>
<body>
  <div id="header">
    <h1><%= AppConfig.site_name %></h1>
    <h2><%= AppConfig.site_slogan %></h2>
  </div>
  <ul id="nav">
    <%- get_navigation -%>
    <%- for page in @pages -%>
      <li <%= page == @pages[0] ? ' class="first"' : '' %>>
        <%= page -%>
      </li>
    <%- end -%>
  </ul>
  <ul id="subnav">
    <li class="first">
      <%= link_to('Configuration', :controller => 'admin', :action => 'settings') %>
    </li>
    <li>
      <%= link_to('Users', :controller => 'admin', :action => 'users')%>
    </li>
    <li>
      <%= link_to('Pages', pages_path)%>
    </li>
    <li>
      <%= link_to('Blogs', blogs_path)%>
    </li>
    <li>
      <%= link_to('Theme', :controller => 'admin', :action => 'theme')%>
    </li>
  </ul>

  <div class="article">
    <%= flash.collect { |k, v| content_tag(:div, v, :class => "flash_"+k.to_s) } %>
    <%= yield  %>
  </div>
  <div id="footer"><%= h(AppConfig.site_footer) %></div>

</body>
</html>
