<%- get_page_title -%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title><%= @page_title %></title>
  <%= stylesheet_link_tag get_theme_stylesheet %>
  <%= javascript_include_tag 'fckeditor/fckeditor' %>
  <%= javascript_include_tag :defaults %>
  <script>
  var counter = 0;
  var limit = 3;
  function addInput(divName){
     if (counter == limit)  {
          alert("You have reached the limit of adding " + counter + " inputs");
     }
     else {
          var newdiv = document.createElement('div');
          newdiv.innerHTML = "<div class='element'>";
          newdiv.innerHTML += '<div class="element_label"><input type="text" name="'+divName+'_new_label_'+counter+'">';
          newdiv.innerHTML += "</div><div class='element_content'>";
          newdiv.innerHTML += "<input type='text' name='"+divName+"_new_value_"+counter+"'></div></div>";
          document.getElementById(divName).appendChild(newdiv);
          counter++;
     }
  }
  </script>
</head>
<body>
  <ul id="nav">
    <%- get_navigation -%>
    <%- for page in @pages -%>
      <li>
        <%= page -%>
      </li>
    <%- end -%>
  </ul>
  <ul id="subnav">
    <%= link_to ('Configuration', :controller => 'admin', :action => 'settings') %>
    <%= link_to('Administer Users', :controller => 'admin', :action => 'users')%>
    <%= link_to('Administer Pages', pages_path)%>
    <%= link_to('Select Theme', :controller => 'admin', :action => 'theme')%>
  </ul>
  <%= flash.collect { |k, v| content_tag(:div, v, :class => "flash_"+k.to_s) } %>
  <%= @page_heading && !@hidden_title ? "<div id='header'>"+@page_heading+"</div>" : "" %>

  <div id="article">
    <%= yield  %>
  </div>

</body>
</html>
